<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="maximum-scale=1.0,minimum-scale=1.0,user-scalable=0,width=device-width,initial-scale=1.0">
    <meta name="format-detection" content="telephone=no">
    <link rel="stylesheet" type="text/css" href="../css/api.css">
    <link rel="stylesheet" type="text/css" href="../css/common.css">
    <link rel="stylesheet" type="text/css" href="../css/common-component.css">
    <link rel="stylesheet" type="text/css" href="../css/font-icon.css">
    <link rel="stylesheet" type="text/css" href="../css/reset.css">
    <link rel="stylesheet" type="text/css" href="../css/caicui.css">
    <script type="text/javascript" src="../script/api.js"></script>
    <script type="text/javascript" src="../script/zepto.js"></script>
    <script src="../script/jquery.min.js" type="text/javascript" charset="utf-8"></script>
    <style type="text/css">
      .cache-list .progress-box2 {
          width: 100%;
      }
      .cache-list .progress-box2 .progress2 {
          width: 100%;
          background: #158f78;
      }
      .cache-list dl{
          padding-right: .2rem;
      }
      .icon-arrow-right{
        font-size: .3rem;
        line-height: 1rem;
        font-weight: bold;
      }
      .cache-list .list .list > dl dt p {
        padding-left: 0.4rem;
        padding-right: 1rem;
      }
      .cache-list dl dd {
          width: 15%;
      }
    </style>
  </head>
  <body>
    <div style="opacity:.0001; position: absolute; top: 50%;z-index:-1">
      <div id="svgDown" class="down-progress">
        <div class="val">2</div>
      </div>
    </div>
    <div id="content"></div>
    <script id="tpl" type="text/x-dot-template">{{~it:value:k }}
      <div class="cache-course">
        <div class="cache-list">
          <dl class="cache-list-title">
            <dt>
              <p>{{=it[k].data.courseName}}</p>
              <div class="progress-box2">
                <div class="progress2">
                  <div role="progressbar" min="0" max="0" class="progress-bar2"></div>
                </div>
                <div class="progress-val2"></div>
              </div>
            </dt>
            <dd><i dataid="{{=it[k].data.courseId}}" class="icon-check courseid"></i></dd>
          </dl>
        </div>{{~it[k].data.chapters:val:key}}
        {{ if(val.isLeaf=='false'){ }}
        <ul class="cache-list">
          <li class="list mycaptA {{=is_loadA(val.chapterId)}}">
            <dl>
              <dt onclick="toggleChild(this)"><i class="icon-arrow-down"></i>
                <p>{{=val.chapterTitle}}</p>
              </dt>
              <dd><i dataid="{{=val.chapterId}}" class="icon-check chaptera"></i></dd>
            </dl>{{~val.children:val2:key2}}
            {{ if(val2.isLeaf=='false'){ }}
            <ul class="list mycaptB {{=is_loadB(val2.chapterId)}}">
              <dl class="haschild">
                <dt onclick="toggleChild(this)"><i class="icon-arrow-down"></i>
                  <p>{{=val2.chapterTitle}}</p>
                </dt>
                <dd><i dataid="{{=val2.chapterId}}" class="icon-check chapterb"></i></dd>
              </dl>{{~val2.children:val3:key3}}
              {{ var is_show=is_loadC(val3.chapterId);}}
              <li class="list mycaptC {{=is_show}}">
                <dl class="haschild">
                  {{var state=3;}}
                  {{var progress=get_dowm('{{=val.chapterId}}','{{=val2.chapterId}}','{{=val3.chapterId}}');}}
                  <!-- <dt tapmode="tapcolor" onclick="next(3,'{{=key}}','{{=key2}}','{{=key3}}','{{=it[k].data.courseId}}',this)"> -->
                  <dt tapmode="tapcolor" onclick="tasksCache(this,'{{=val3.chapterId}}')">
                  <i type="1" data-chapId="{{=val3.chapterId}}" class="dot-status"></i>
                    <p>{{=val3.chapterTitle}}</p>
                  </dt>
                  <dd><span style="font-size: .3rem;position: absolute;right: 1.4rem;top: .3rem;"></span><i dataid="{{=val3.chapterId}}" class="icon-check chapterc"></i><!-- {{ if(progress==0 ){state=3;}else if(progress>100){state=4}else if(progress>0 &&  progress<100){state=2}}}<span class="down_speed none"></span> -->
                    <div id="{{=val3.chapterId}}" courseid="{{=it[k].data.courseId}}" chapterida="{{=val.chapterId}}" chapteridb="{{=val2.chapterId}}" chapteridc="{{=val3.chapterId}}" type="3" class="down-progress task{{=val3.chapterId}}"><i class="icon-download3"></i>
                      <div class="val {{=is_show}}"></div>
                    </div>
                    <div class="down_data none">{{=JSON.stringify(it[k].data)}}</div>
                  </dd><i class="icon-arrow-right"></i>
                </dl>
              </li>
              {{~val3.tasks:val4:key4}}
            {{ if(val4.taskType=='video'){ }}
            <div class="taskList {{=is_show}} none">
              <dl style="padding-left: .8rem;">
          
                <dt onclick="next(3,'{{=key}}','{{=key2}}','{{=key3}}',this,'{{=val3.chapterId}}')"><i type="1" data-chapId="{{=val3.chapterId}}" class="dot-status"></i><i class="icon-video" style="font-size: .3rem;margin-left:.45rem;"></i>
                  <p style="padding-left: .9rem;">{{=val4.title}}</p>
                  <!--p  {{=progress+'='+val2.chapterId}}-->
                </dt>
                <dd>
                 <!--  {{ if(progress==0 ){state=3;}else if(progress>=100){state=4}else if(progress>0 &&  progress<100){state=2}}} -->
                  <div id="{{=val3.chapterId}}" courseid="{{=it.courseId}}" chapterida="{{=val.chapterId}}" chapteridb="{{=val2.chapterId}}" chapteridc="{{=val3.chapterId}}" chapterNamea="{{=val.chapterTitle}}" chapterNameb="{{=val2.chapterTitle}}" chapterNamec="{{=val3.chapterTitle}}" courseName="{{=it.courseName}}" versionid="{{=it.versionId}}" type="3" onclick="down(this)" class="down-progress task{{=val4.videoCcid}}"><i class="icon-download3"></i>
                    <div class="val"></div>
                  </div>
                  <div class="down_data none">{{=JSON.stringify(val4)}}</div>
                </dd>
              </dl>
            </div>{{ } }}
            {{~}}
              {{~}}
            </ul>{{ }else{ }}
            {{ var is_show=is_loadB(val2.chapterId);}}
            <ul class="list mycaptB {{=is_show}}">
              {{var state=3;}}
              {{var progress=get_dowm('{{=val.chapterId}}','{{=val2.chapterId}}','');}}
              <li class="list {{=is_show}}">
              <dl>
                <!-- <dt tapmode="tapcolor" onclick="next(2,'{{=key}}','{{=key2}}',-1,'{{=it[k].data.courseId}}',this)"> -->
                <dt tapmode="tapcolor" onclick="tasksCache(this,'{{=val2.chapterId}}')">
                <i type="1" data-chapId="{{=val2.chapterId}}" class="dot-status"></i>
                  <p>{{=val2.chapterTitle}}</p>
                </dt>
                <dd><span style="font-size: .3rem;position: absolute;right: 1.4rem;top: .3rem;"></span><i dataid="{{=val2.chapterId}}" class="icon-check chapterb"></i><!-- {{ if(progress==0 ){state=3;}else if(progress>=100){state=4}else if(progress>0 &&  progress<100){state=2}}}<span class="down_speed none"></span> -->
                  <div id="{{=val2.chapterId}}" courseid="{{=it[k].data.courseId}}" chapterida="{{=val.chapterId}}" chapteridb="{{=val2.chapterId}}" chapteridc="" type="3" class="down-progress task{{=val2.chapterId}}"><i class="icon-download3"></i>
                    <div class="val {{=is_show}}"></div>
                  </div>
                  <div class="down_data none">{{=JSON.stringify(it[k].data)}}</div>
                </dd><i class="icon-arrow-right"></i>
              </dl>
              </li>
              {{~val2.tasks:val4:key4}}
            {{ if(val4.taskType=='video'){ }}
            <div class="taskList {{=is_show}} none">
              <dl>
                <dt onclick="next(2,'{{=key}}','{{=key2}}',-1,this,'{{=val2.chapterId}}')"><i type="1" data-chapId="{{=val2.chapterId}}" class="dot-status"></i><i class="icon-video" style="font-size: .3rem;margin-left:.45rem;"></i>
                  <p style="padding-left: .9rem;">{{=val4.title}}</p>
                  <!--p  {{=progress+'='+val2.chapterId}}-->
                </dt>
                <dd>
                  <!-- {{ if(progress==0 ){state=3;}else if(progress>=100){state=4}else if(progress>0 &&  progress<100){state=2}}} -->
                  <div id="{{=val2.chapterId}}" courseid="{{=it.courseId}}" chapterida="{{=val.chapterId}}" chapteridb="{{=val2.chapterId}}" chapteridc="" chapterNamea="{{=val.chapterTitle}}" chapterNameb="{{=val2.chapterTitle}}" chapterNamec="" courseName="{{=it.courseName}}" versionid="{{=it.versionId}}"  type="3" onclick="down(this)" class="down-progress task{{=val4.videoCcid}}"><i class="icon-download3"></i>
                    <div class="val"></div>
                  </div>
                  
                  <div class="down_data none">{{=JSON.stringify(val4)}}</div>
                </dd>
              </dl>
            </div>
            {{ } }}
            {{~}}
            </ul>{{ } }}
            {{~}}
          </li>
        </ul>{{ }else{ }}
        <ul class="cache-list">
          {{var state=3;}}
          {{var progress=get_dowm('{{=val.chapterId}}','','');}}
          {{var is_show=is_loadA(val.chapterId);}}
          <li class="list mycaptA {{=is_show}}">
            <dl>
              <!-- <dt tapmode="tapcolor" onclick="next(1,'{{=key}}',-1,-1,'{{=it[k].data.courseId}}',this)"> -->
              <dt tapmode="tapcolor" onclick="tasksCache(this,'{{=val.chapterId}}')">
              <i type="1" data-chapId="{{=val.chapterId}}" class="dot-status"></i>
                <p> {{=val.chapterTitle}}</p>
              </dt>
              <dd><span style="font-size: .3rem;position: absolute;right: 1.4rem;top: .3rem;"></span><i dataid="{{=val.chapterId}}" class="icon-check chaptera"></i><!-- {{ if(progress==0 ){state=3;}else if(progress>=100){state=4}else if(progress>0 &&  progress<100){state=2}}}<span class="down_speed none"></span> -->
                <div id="{{=val.chapterId}}" courseid="{{=it[k].data.courseId}}" chapterida="{{=val.chapterId}}" chapteridb="" chapteridc="" type="3" class="down-progress task{{=val.chapterId}}"><i class="icon-download3"></i>
                  <div class="val {{=is_show}}"></div>
                </div>
                <div class="down_data none">{{=JSON.stringify(it[k].data)}}</div>
              </dd><i class="icon-arrow-right"></i>
            </dl>
          </li>
          {{~val.tasks:val4:key4}}
            {{ if(val4.taskType=='video'){ }}
            <div class="taskList {{=is_show}} none">
      
              <dl>
                <dt onclick="next(1,'{{=key}}',-1,-1,this,'{{=val.chapterId}}')"><i type="1" data-chapId="{{=val.chapterId}}" class="dot-status"></i><i class="icon-video" style="font-size: .3rem;margin-left:.45rem;"></i>
                  <p style="padding-left: .9rem;">{{=val4.title}}</p>
                  <!--p  {{=progress+'='+val2.chapterId}}-->
                </dt>
                <dd>
                  <!-- {{ if(progress==0 ){state=3;}else if(progress>=100){state=4}else if(progress>0 &&  progress<100){state=2}}} -->
                  <div id="{{=val.chapterId}}" courseid="{{=it.courseId}}" chapterida="{{=val.chapterId}}" chapteridb="" chapteridc="" chapterNamea="{{=val.chapterTitle}}" chapterNameb="" chapterNamec="" courseName="{{=it.courseName}}" versionid="{{=it.versionId}}"  type="3" onclick="down(this)" class="down-progress task{{=val4.videoCcid}}"><i class="icon-download3"></i>
                    <div class="val"></div>
                  </div>
                  <div class="down_data none">{{=JSON.stringify(val4)}}</div>
                </dd>
              </dl>
            </div>
            {{ } }}
            {{~}}
        </ul>{{ } }}
        {{~}}
      </div>{{~}}
    </script>
    <script type="text/javascript" src="../script/comm.js"></script>
    <script type="text/javascript" src="../script/doT.min.js"></script>
    <script type="text/javascript" src="../script/caicui.js"></script>
    <script type="text/javascript" src="../script/db.js"></script>
    <script type="text/javascript" src="../script/saveTasksProgress.js"></script>
    <script src="../script/pagejs/video-cache-f.js" type="text/javascript" charset="utf-8"></script>
  </body>
</html>